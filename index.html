<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#FF69B4">
    <title>SEIREN OS</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="https://i.postimg.cc/C16TRtcx/6g3mnqy9685d1.png">
    
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="app-background" class="bg-safe"></div>
    <div class="scanlines"></div>

    <div class="app-container">
        
        <header>
            <div class="logo">‚ô• SEIREN OS</div>
            <div class="currency-display">
                <img src="https://i.postimg.cc/C16TRtcx/6g3mnqy9685d1.png" alt="Banana">
                <span id="banana-count">0</span>
            </div>
        </header>

        <main id="main-content">
            
            <section id="view-dashboard" class="active-view">
                <div class="assistant-container">
                    <div class="speech-bubble" id="assistant-dialogue">System Online...</div>
                    <img id="assistant-img" src="https://i.postimg.cc/7PTStzS5/Miharu-Sena-Kanaka-102.webp" onclick="feedAssistant()">
                </div>
                <div class="status-panel">
                    <p>Tasks Due: <span id="pending-count">0</span></p>
                    <small>Tap Miharu to Feed (-5 üçå)</small>
                </div>
            </section>

            <section id="view-missions" class="hidden-view">
                <h2>‚ô• Mission Log</h2>
                <div class="input-group">
                    <input type="text" id="task-input" placeholder="New mission...">
                    <input type="datetime-local" id="task-date">
                    <div class="row">
                        <select id="task-type">
                            <option value="personal">Personal</option>
                            <option value="work">Work</option>
                            <option value="urgent">Urgent</option>
                        </select>
                        <button class="add-btn" onclick="addTask()">ADD</button>
                    </div>
                </div>
                <ul id="task-list"></ul>
            </section>

            <section id="view-gacha" class="hidden-view">
                <div class="gacha-center">
                    <h2>‚ô• Summon</h2>
                    <p>Cost: 50 Bananas</p>
                    <img src="https://i.postimg.cc/C16TRtcx/6g3mnqy9685d1.png" class="banana-bounce">
                    <button class="pull-btn" onclick="pullGacha()">PULL LEVER</button>
                </div>
                <div id="gacha-overlay" class="hidden">
                    <div class="gacha-card-reveal">
                        <div id="reveal-container"></div>
                        <button onclick="closeGacha()">KEEP</button>
                    </div>
                </div>
            </section>

            <section id="view-gallery" class="hidden-view">
                <h2>‚ô• Collection</h2>
                <div id="gallery-grid"></div>
            </section>

        </main>

        <nav>
            <button onclick="switchView('view-dashboard')">Home</button>
            <button onclick="switchView('view-missions')">Tasks</button>
            <button onclick="switchView('view-gacha')">Gacha</button>
            <button onclick="switchView('view-gallery')">Gallery</button>
        </nav>

    </div>

    <script src="script.js"></script>
    <script>
        // PWA Service Worker Registration
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</body>
</html>
